<?xml version="1.0" encoding="UTF-8"?>
<odoo>
<record id="factelec_43_invoice_supplier" model="ir.ui.view">
  <field name="name">factelec_43.invoice.supplier.form</field>
  <field name="model">account.invoice</field>
  <field name="inherit_id" ref="account.invoice_supplier_form"/>
  <field name="arch" type="xml">
    <xpath expr="//sheet/div/h1" position="after">
        <field name ="fe_current_country_company_code" invisible="1"/>
        <field name="fe_in_invoice_type" invisible="1"/>
        <h3><field name="fe_clave" readonly="1"/></h3>
        <h3><field name="fe_clave" invisible ="1"/></h3>
    </xpath>
    <field name="sequence_number_next" position="replace">
      <field name="sequence_number_next" attrs="{'invisible': [('sequence_number_next', '=', '0')]}"/>
    </field>
     <field name="reference" position="after">
        <field name = "fe_activity_code_id"  domain="[('company_id', '=', company_id)]" options="{'no_create_edit':True}" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/> 
        <field name="journal_id" string="Tipo de Documento" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
        <field name="payment_term_id" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
        <field name = "fe_payment_type" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
        <field name = "fe_receipt_status" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
        <field name = "fe_condicion_impuesto" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
     </field>
     <notebook position="before">
         <!-- 1570054332 -->
         <field name = "fe_xml_supplier_xslt" readonly="1" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
         <field name = "fe_xml_supplier_xslt" invisible="1"/>
     </notebook>
    <field name="currency_id" position="after">
       <field name="fe_server_state" readonly='1' attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
       <!-- 1569524296 -->
       <field name="fe_xml_supplier" filename="fe_xml_supplier_name" string="Subir XML Proveedor" attrs="{'invisible':['|',('fe_in_invoice_type','!=','ME'),('fe_current_country_company_code', '!=', 'CR')]}" />
       <field name="fe_xml_supplier_name" invisible="1"/>
       <!--1569524732-->
       <field name="fe_xml_supplier_hacienda" filename="fe_xml_supplier_hacienda_name" string="Subir XML Hacienda Proveedor" attrs="{'invisible':['|',('fe_in_invoice_type','!=','ME'),('fe_current_country_company_code', '!=', 'CR')]}"/>
       <field name="fe_xml_supplier_hacienda_name" invisible="1"/>
      <!--1570034790-->
       <field name="fe_xml_hacienda" filename="fe_name_xml_hacienda" string="Mensaje Hacienda Respuesta" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
       <field name="fe_name_xml_hacienda" invisible="1"/>
       <!--1570035130-->
       <field name = "fe_msg_type" attrs="{'invisible':['|',('fe_in_invoice_type','!=','ME'),('fe_current_country_company_code', '!=', 'CR')]}" />
       <!--1570035143-->
       <field name = "fe_detail_msg" attrs="{'invisible':[('fe_in_invoice_type','!=','ME')]}" />
        <button name='confirm_bill' string="Enviar a Hacienda"  type="object" class="oe_highlight" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
        <button name='get_invoice' string="consultar"  type="object" class="oe_highlight" attrs="{'invisible': ['|',('fe_current_country_company_code', '!=', 'CR'),('fe_in_invoice_type','=','OTRO')]}"/>
    </field>
  </field>
</record>
<!-- Inherit Form view -->
<record id="factelec_43_invoice" model="ir.ui.view">
  <field name="name">factelec_43.invoice.form</field>
  <field name="model">account.invoice</field>
  <field name="inherit_id" ref="account.invoice_form"/>
  <field name="arch" type="xml">
      <xpath expr="//page[last()]" position="after">
        <field name ="fe_current_country_company_code" invisible="1"/>
        <page string="Facturacion electrónica" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}">
          <form>
            <group>
              <button name='get_invoice' string="consultar"  type="object" class="oe_highlight" />
            </group>
            <group>
              <button name='confirm_bill' string="Enviar a Hacienda"  type="object" class="oe_highlight" />
            </group>
            <group>
              <field name="fe_name_xml_sign" invisible='1'/>
              <field name="fe_name_xml_hacienda" invisible='1'/>
              <field name="fe_xml_sign" filename='fe_name_xml_sign' options="{'filename': 'fe_name_xml_sign'}"/>
              <field name="fe_xml_hacienda" filename='fe_name_xml_hacienda' options="{'filename': 'fe_name_xml_hacienda'}"/>
            </group>
          </form>
        </page>
      </xpath>
      <xpath expr="//sheet/h1" position="after">
          <h3><field name="fe_clave" readonly="1"/></h3>
      </xpath>
      <field name="journal_id" position="replace"/>
      <field name="payment_term_id" position="after">
            <field name="journal_id" string="Tipo de Documento" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
      </field>
      <field name="user_id" position="after">
          <field name = "fe_payment_type"  attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
          <field name = "fe_receipt_status" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
          <field name = "fe_activity_code_id"  domain="[('company_id', '=', company_id)]" options="{'no_create_edit':True}" attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
      </field>
      <div groups="base.group_multi_currency" position="after">
        <field name = "fe_currency_rate" readonly="1"/>
      </div>
      <field name="payment_term_id" required="1" position="after">
            <field name="fe_server_state" readonly='1' attrs="{'invisible': [('fe_current_country_company_code', '!=', 'CR')]}"/>
      </field>
      
  </field>
</record>
<!--**************popup*****************-->
  <!--#1570130107-->
  <record model="ir.ui.view" id="confirm_wizard">
        <field name="name">Confirmar</field>
        <field name="model">confirm.message</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form>
    <group>
     <span>La factura contiene lineas con valor 0, ¿Desea continuar?</span>
    </group>
                <footer>
                    <button string="Edit" special="cancel" class="oe_highlight"/>
                    <button name="continuar" string="Continue" type="object" class="oe_highlight" />
                </footer>
            </form>
        </field>
    </record>



<!--**************popup*****************-->

  <record model="ir.ui.view" id="alert_wizard">
        <field name="name">alerta</field>
        <field name="model">confirm.alert</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form>
    <group>
     <span>El total de la factura no es igual a la factura del proveedor, ¿Desea continuar?</span>
    </group>
                <footer>
                    <button string="Edit" special="cancel" class="oe_highlight"/>
                    <button name="continuar" string="Continue" type="object" class="oe_highlight" />
                </footer>
            </form>
        </field>
    </record>


</odoo>
